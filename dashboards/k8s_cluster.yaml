annotations:
  list:
    - builtIn: 1
      datasource:
        type: datasource
        uid: grafana
      enable: true
      hide: true
      iconColor: rgba(0, 211, 255, 1)
      name: Annotations & Alerts
      target:
        limit: 100
        matchAny: false
        tags: []
        type: dashboard
      type: dashboard
description: Monitors Kubernetes cluster using Prometheus. Shows overall cluster CPU
  / Memory / Filesystem usage as well as individual pod, containers, systemd services
  statistics. Uses cAdvisor metrics only.
editable: true
fiscalYearStartMonth: 0
gnetId: 315
graphTooltip: 0
id: 8
links: []
liveNow: false
panels:
  - collapsed: true
    datasource:
      type: prometheus
      uid: ${main_datasource}
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 0
    id: 33
    panels:
      - aliasColors: {}
        bars: false
        dashLength: 10
        dashes: false
        datasource:
          type: prometheus
          uid: ${k8s_datasource}
        decimals: 2
        editable: true
        error: false
        fill: 1
        fillGradient: 0
        grid: {}
        gridPos:
          h: 6
          w: 24
          x: 0
          y: 1
        height: 200px
        hiddenSeries: false
        id: 32
        isNew: true
        legend:
          alignAsTable: false
          avg: true
          current: true
          max: false
          min: false
          rightSide: false
          show: false
          sideWidth: 200
          sort: current
          sortDesc: true
          total: false
          values: true
        lines: true
        linewidth: 2
        links: []
        nullPointMode: connected
        options:
          alertThreshold: true
        percentage: false
        pluginVersion: 9.0.7
        pointradius: 5
        points: false
        renderer: flot
        seriesOverrides: []
        spaceLength: 10
        stack: false
        steppedLine: false
        targets:
          - datasource:
              type: prometheus
              uid: ${k8s_datasource}
            expr: sum (rate (container_network_receive_bytes_total{kubernetes_io_hostname=~"^$Node$"}[1m]))
            interval: 10s
            intervalFactor: 1
            legendFormat: Received
            metric: network
            refId: A
            step: 10
          - datasource:
              type: prometheus
              uid: ${k8s_datasource}
            expr: '- sum (rate (container_network_transmit_bytes_total{kubernetes_io_hostname=~"^$Node$"}[1m]))'
            interval: 10s
            intervalFactor: 1
            legendFormat: Sent
            metric: network
            refId: B
            step: 10
        thresholds: []
        timeRegions: []
        title: Network I/O pressure
        tooltip:
          msResolution: false
          shared: true
          sort: 0
          value_type: cumulative
        type: timeseries
        xaxis:
          mode: time
          show: true
          values: []
        yaxes:
          - format: Bps
            logBase: 1
            show: true
          - format: Bps
            logBase: 1
            show: false
        yaxis:
          align: false
    targets:
      - datasource:
          type: prometheus
          uid: ${main_datasource}
        refId: A
    title: Network I/O pressure
    type: row
  - collapsed: false
    datasource:
      type: prometheus
      uid: ${main_datasource}
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 1
    id: 34
    panels: []
    targets:
      - datasource:
          type: prometheus
          uid: ${main_datasource}
        refId: A
    title: Total usage
    type: row
  - datasource:
      type: prometheus
      uid: ${k8s_datasource}
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        mappings:
          - options:
              match: 'null'
              result:
                text: N/A
            type: special
        max: 100
        min: 0
        thresholds:
          mode: absolute
          steps:
            - color: rgba(50, 172, 45, 0.97)
              value: null
            - color: rgba(237, 129, 40, 0.89)
              value: 65
            - color: rgba(245, 54, 54, 0.9)
              value: 90
        unit: percentage
      overrides: []
    gridPos:
      h: 5
      w: 8
      x: 0
      y: 2
    id: 4
    links: []
    maxDataPoints: 100
    options:
      orientation: horizontal
      reduceOptions:
        calcs:
          - lastNotNull
        fields: ''
        values: false
      showThresholdLabels: false
      showThresholdMarkers: true
      text: {}
    pluginVersion: 9.2.5
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        exemplar: true
        expr: sum (container_memory_working_set_bytes{id="/",kubernetes_io_hostname=~"^$Node$"})
          / sum (machine_memory_bytes{kubernetes_io_hostname=~"^$Node$"}) * 100
        interval: 10s
        intervalFactor: 1
        legendFormat: ''
        refId: A
        step: 10
    title: Cluster memory usage
    type: gauge
  - datasource:
      type: prometheus
      uid: ${k8s_datasource}
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        decimals: 2
        mappings:
          - options:
              match: 'null'
              result:
                text: N/A
            type: special
        max: 100
        min: 0
        thresholds:
          mode: absolute
          steps:
            - color: rgba(50, 172, 45, 0.97)
              value: null
            - color: rgba(237, 129, 40, 0.89)
              value: 65
            - color: rgba(245, 54, 54, 0.9)
              value: 90
        unit: percentage
      overrides: []
    gridPos:
      h: 5
      w: 8
      x: 8
      y: 2
    id: 6
    links: []
    maxDataPoints: 100
    options:
      orientation: horizontal
      reduceOptions:
        calcs:
          - lastNotNull
        fields: ''
        values: false
      showThresholdLabels: false
      showThresholdMarkers: true
      text: {}
    pluginVersion: 9.2.5
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        exemplar: true
        expr: sum(rate(container_cpu_usage_seconds_total{kubernetes_io_hostname=~"^$Node$"}[5m]))
          / sum (machine_cpu_cores{kubernetes_io_hostname=~"^$Node$"}) * 100
        interval: 10s
        intervalFactor: 1
        legendFormat: ''
        refId: A
        step: 10
    title: Cluster CPU usage (1m avg)
    type: gauge
  - datasource:
      type: prometheus
      uid: ${k8s_datasource}
    description: ''
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        decimals: 2
        mappings:
          - options:
              match: 'null'
              result:
                text: N/A
            type: special
        max: 100
        min: 0
        thresholds:
          mode: absolute
          steps:
            - color: rgba(50, 172, 45, 0.97)
              value: null
            - color: rgba(237, 129, 40, 0.89)
              value: 65
            - color: rgba(245, 54, 54, 0.9)
              value: 90
        unit: percentage
      overrides: []
    gridPos:
      h: 5
      w: 8
      x: 16
      y: 2
    id: 7
    links: []
    maxDataPoints: 100
    options:
      orientation: horizontal
      reduceOptions:
        calcs:
          - lastNotNull
        fields: ''
        values: false
      showThresholdLabels: false
      showThresholdMarkers: true
      text: {}
    pluginVersion: 9.2.5
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (container_fs_usage_bytes{device="/dev/root",id="/",kubernetes_io_hostname=~"^$Node$"})
          / sum (container_fs_limit_bytes{device="/dev/root",id="/",kubernetes_io_hostname=~"^$Node$"})
          * 100
        interval: 10s
        intervalFactor: 1
        legendFormat: ''
        metric: ''
        refId: A
        step: 10
    title: Cluster filesystem usage
    type: gauge
  - datasource:
      type: prometheus
      uid: ${k8s_datasource}
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        decimals: 2
        mappings:
          - options:
              match: 'null'
              result:
                text: N/A
            type: special
        thresholds:
          mode: absolute
          steps:
            - color: green
              value: null
            - color: red
              value: 80
        unit: bytes
      overrides: []
    gridPos:
      h: 3
      w: 4
      x: 0
      y: 7
    id: 9
    links: []
    maxDataPoints: 100
    options:
      colorMode: none
      graphMode: none
      justifyMode: auto
      orientation: horizontal
      reduceOptions:
        calcs:
          - lastNotNull
        fields: ''
        values: false
      text: {}
      textMode: auto
    pluginVersion: 9.2.5
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (container_memory_working_set_bytes{id="/",kubernetes_io_hostname=~"^$Node$"})
        interval: 10s
        intervalFactor: 1
        refId: A
        step: 10
    title: Used
    type: stat
  - datasource:
      type: prometheus
      uid: ${k8s_datasource}
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        decimals: 2
        mappings:
          - options:
              match: 'null'
              result:
                text: N/A
            type: special
        thresholds:
          mode: absolute
          steps:
            - color: green
              value: null
            - color: red
              value: 80
        unit: bytes
      overrides: []
    gridPos:
      h: 3
      w: 4
      x: 4
      y: 7
    id: 10
    links: []
    maxDataPoints: 100
    options:
      colorMode: none
      graphMode: none
      justifyMode: auto
      orientation: horizontal
      reduceOptions:
        calcs:
          - lastNotNull
        fields: ''
        values: false
      text: {}
      textMode: auto
    pluginVersion: 9.2.5
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (machine_memory_bytes{kubernetes_io_hostname=~"^$Node$"})
        interval: 10s
        intervalFactor: 1
        refId: A
        step: 10
    title: Total
    type: stat
  - datasource:
      type: prometheus
      uid: ${k8s_datasource}
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        decimals: 2
        mappings:
          - options:
              match: 'null'
              result:
                text: N/A
            type: special
        thresholds:
          mode: absolute
          steps:
            - color: green
              value: null
            - color: red
              value: 80
        unit: none
      overrides: []
    gridPos:
      h: 3
      w: 4
      x: 8
      y: 7
    id: 11
    links: []
    maxDataPoints: 100
    options:
      colorMode: none
      graphMode: none
      justifyMode: auto
      orientation: horizontal
      reduceOptions:
        calcs:
          - lastNotNull
        fields: ''
        values: false
      text: {}
      textMode: auto
    pluginVersion: 9.2.5
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        exemplar: true
        expr: sum(rate(container_cpu_usage_seconds_total{name!~"^k8s_.*",kubernetes_io_hostname=~"^$Node$"}[5m]))
        interval: 10s
        intervalFactor: 1
        legendFormat: ''
        refId: A
        step: 10
    title: Used
    type: stat
  - datasource:
      type: prometheus
      uid: ${k8s_datasource}
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        decimals: 2
        mappings:
          - options:
              match: 'null'
              result:
                text: N/A
            type: special
        thresholds:
          mode: absolute
          steps:
            - color: green
              value: null
            - color: red
              value: 80
        unit: none
      overrides: []
    gridPos:
      h: 3
      w: 4
      x: 12
      y: 7
    id: 12
    links: []
    maxDataPoints: 100
    options:
      colorMode: none
      graphMode: none
      justifyMode: auto
      orientation: horizontal
      reduceOptions:
        calcs:
          - lastNotNull
        fields: ''
        values: false
      text: {}
      textMode: auto
    pluginVersion: 9.2.5
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (machine_cpu_cores{kubernetes_io_hostname=~"^$Node$"})
        interval: 10s
        intervalFactor: 1
        refId: A
        step: 10
    title: Total
    type: stat
  - datasource:
      type: prometheus
      uid: ${k8s_datasource}
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        decimals: 2
        mappings:
          - options:
              match: 'null'
              result:
                text: N/A
            type: special
        thresholds:
          mode: absolute
          steps:
            - color: green
              value: null
            - color: red
              value: 80
        unit: bytes
      overrides: []
    gridPos:
      h: 3
      w: 4
      x: 16
      y: 7
    id: 13
    links: []
    maxDataPoints: 100
    options:
      colorMode: none
      graphMode: none
      justifyMode: auto
      orientation: horizontal
      reduceOptions:
        calcs:
          - lastNotNull
        fields: ''
        values: false
      text: {}
      textMode: auto
    pluginVersion: 9.2.5
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (container_fs_usage_bytes{device=~"/dev/root",id="/",kubernetes_io_hostname=~"^$Node$"})
        interval: 10s
        intervalFactor: 1
        refId: A
        step: 10
    title: Used
    type: stat
  - datasource:
      type: prometheus
      uid: ${k8s_datasource}
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        decimals: 2
        mappings:
          - options:
              match: 'null'
              result:
                text: N/A
            type: special
        thresholds:
          mode: absolute
          steps:
            - color: green
              value: null
            - color: red
              value: 80
        unit: bytes
      overrides: []
    gridPos:
      h: 3
      w: 4
      x: 20
      y: 7
    id: 14
    links: []
    maxDataPoints: 100
    options:
      colorMode: none
      graphMode: none
      justifyMode: auto
      orientation: horizontal
      reduceOptions:
        calcs:
          - lastNotNull
        fields: ''
        values: false
      text: {}
      textMode: auto
    pluginVersion: 9.2.5
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (container_fs_limit_bytes{device="/dev/root",id="/",kubernetes_io_hostname=~"^$Node$"})
        interval: 10s
        intervalFactor: 1
        refId: A
        step: 10
    title: Total
    type: stat
  - collapsed: false
    datasource:
      type: prometheus
      uid: ${main_datasource}
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 10
    id: 35
    panels: []
    targets:
      - datasource:
          type: prometheus
          uid: ${main_datasource}
        refId: A
    title: Pods CPU usage
    type: row
  - aliasColors: {}
    bars: false
    dashLength: 10
    dashes: false
    datasource:
      type: prometheus
      uid: ${k8s_datasource}
    decimals: 3
    editable: true
    error: false
    fill: 0
    fillGradient: 0
    grid: {}
    gridPos:
      h: 7
      w: 24
      x: 0
      y: 11
    height: ''
    hiddenSeries: false
    id: 17
    isNew: true
    legend:
      alignAsTable: true
      avg: true
      current: true
      max: false
      min: false
      rightSide: true
      show: true
      sort: current
      sortDesc: true
      total: false
      values: true
    lines: true
    linewidth: 2
    links: []
    nullPointMode: connected
    options:
      alertThreshold: true
    percentage: false
    pluginVersion: 9.2.5
    pointradius: 5
    points: false
    renderer: flot
    seriesOverrides: []
    spaceLength: 10
    stack: false
    steppedLine: true
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: "sum(\r\n    rate(container_cpu_usage_seconds_total{image!=\"\",kubernetes_io_hostname=~\"\
          ^$Node$\"}[$__rate_interval])\r\n    ) by (pod)"
        interval: 10s
        intervalFactor: 1
        legendFormat: '{{ pod_name }}'
        metric: container_cpu
        refId: A
        step: 10
    thresholds: []
    timeRegions: []
    title: Pods CPU usage (1m avg)
    tooltip:
      msResolution: true
      shared: true
      sort: 2
      value_type: cumulative
    type: timeseries
    xaxis:
      mode: time
      show: true
      values: []
    yaxes:
      - format: none
        label: cores
        logBase: 1
        show: true
      - format: short
        logBase: 1
        show: false
    yaxis:
      align: false
  - collapsed: false
    datasource:
      type: prometheus
      uid: ${main_datasource}
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 18
    id: 36
    panels: []
    targets:
      - datasource:
          type: prometheus
          uid: ${main_datasource}
        refId: A
    title: System services CPU usage
    type: row
  - aliasColors: {}
    bars: false
    dashLength: 10
    dashes: false
    datasource:
      type: prometheus
      uid: ${k8s_datasource}
    decimals: 3
    description: ''
    editable: true
    error: false
    fill: 0
    fillGradient: 0
    grid: {}
    gridPos:
      h: 7
      w: 24
      x: 0
      y: 19
    height: ''
    hiddenSeries: false
    id: 23
    isNew: true
    legend:
      alignAsTable: true
      avg: true
      current: true
      max: false
      min: false
      rightSide: true
      show: true
      sort: current
      sortDesc: true
      total: false
      values: true
    lines: true
    linewidth: 2
    links: []
    nullPointMode: connected
    options:
      alertThreshold: true
    percentage: false
    pluginVersion: 9.2.5
    pointradius: 5
    points: false
    renderer: flot
    seriesOverrides: []
    spaceLength: 10
    stack: false
    steppedLine: true
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (rate (container_cpu_usage_seconds_total{id=~"/system.*",kubernetes_io_hostname=~"^$Node$"}[$__rate_interval]))
          by (id)
        hide: false
        interval: 10s
        intervalFactor: 1
        legendFormat: '{{ systemd_service_name }}'
        metric: container_cpu
        refId: A
        step: 10
    thresholds: []
    timeRegions: []
    title: System services CPU usage (1m avg)
    tooltip:
      msResolution: true
      shared: true
      sort: 2
      value_type: cumulative
    type: timeseries
    xaxis:
      mode: time
      show: true
      values: []
    yaxes:
      - format: none
        label: cores
        logBase: 1
        show: true
      - format: short
        logBase: 1
        show: false
    yaxis:
      align: false
  - collapsed: false
    datasource:
      type: prometheus
      uid: ${main_datasource}
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 26
    id: 37
    panels: []
    targets:
      - datasource:
          type: prometheus
          uid: ${main_datasource}
        refId: A
    title: Containers CPU usage
    type: row
  - aliasColors: {}
    bars: false
    dashLength: 10
    dashes: false
    datasource:
      type: prometheus
      uid: ${k8s_datasource}
    decimals: 3
    editable: true
    error: false
    fill: 0
    fillGradient: 0
    grid: {}
    gridPos:
      h: 7
      w: 24
      x: 0
      y: 27
    height: ''
    hiddenSeries: false
    id: 24
    isNew: true
    legend:
      alignAsTable: true
      avg: true
      current: true
      hideEmpty: false
      hideZero: false
      max: true
      min: false
      rightSide: true
      show: true
      sort: max
      sortDesc: true
      total: false
      values: true
    lines: true
    linewidth: 2
    links: []
    nullPointMode: connected
    options:
      alertThreshold: true
    percentage: false
    pluginVersion: 9.2.5
    pointradius: 5
    points: false
    renderer: flot
    seriesOverrides: []
    spaceLength: 10
    stack: false
    steppedLine: true
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        exemplar: true
        expr: sum (rate (container_cpu_usage_seconds_total{image!="",name=~"^k8s_.*",container_name!="POD",kubernetes_io_hostname=~"^$Node$"}[$__interval]))
          by (container_name, pod_name)
        hide: true
        interval: 10s
        intervalFactor: 1
        legendFormat: 'pod: {{ pod_name }} | {{ container_name }}'
        metric: container_cpu
        refId: A
        step: 10
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        exemplar: true
        expr: sum (rate (container_cpu_usage_seconds_total{image!="",name!~"^k8s_.*",kubernetes_io_hostname=~"^$Node$"}[1m]))
          by (image)
        hide: false
        interval: 10s
        intervalFactor: 1
        legendFormat: '{{ name }}'
        metric: container_cpu
        refId: B
        step: 10
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (rate (container_cpu_usage_seconds_total{rkt_container_name!="",kubernetes_io_hostname=~"^$Node$"}[1m]))
          by (kubernetes_io_hostname, rkt_container_name)
        interval: 10s
        intervalFactor: 1
        legendFormat: 'rkt: {{ kubernetes_io_hostname }} | {{ rkt_container_name }}'
        metric: container_cpu
        refId: C
        step: 10
    thresholds: []
    timeRegions: []
    title: Containers CPU usage (1m avg)
    tooltip:
      msResolution: true
      shared: true
      sort: 2
      value_type: cumulative
    type: timeseries
    xaxis:
      mode: time
      show: true
      values: []
    yaxes:
      - format: none
        label: cores
        logBase: 1
        show: true
      - format: short
        logBase: 1
        show: false
    yaxis:
      align: false
  - collapsed: false
    datasource:
      type: prometheus
      uid: ${main_datasource}
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 34
    id: 38
    panels: []
    targets:
      - datasource:
          type: prometheus
          uid: ${main_datasource}
        refId: A
    title: All processes CPU usage
    type: row
  - aliasColors: {}
    bars: false
    dashLength: 10
    dashes: false
    datasource:
      type: prometheus
      uid: ${k8s_datasource}
    decimals: 3
    editable: true
    error: false
    fill: 0
    fillGradient: 0
    grid: {}
    gridPos:
      h: 14
      w: 24
      x: 0
      y: 35
    hiddenSeries: false
    id: 20
    isNew: true
    legend:
      alignAsTable: true
      avg: true
      current: true
      max: false
      min: false
      rightSide: false
      show: true
      sort: current
      sortDesc: true
      total: false
      values: true
    lines: true
    linewidth: 2
    links: []
    nullPointMode: connected
    options:
      alertThreshold: true
    percentage: false
    pluginVersion: 9.2.5
    pointradius: 5
    points: false
    renderer: flot
    seriesOverrides: []
    spaceLength: 10
    stack: false
    steppedLine: true
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        exemplar: true
        expr: sum (rate (container_cpu_usage_seconds_total{id!="/",kubernetes_io_hostname=~"^$Node$"}[$__rate_interval]))
          by (id)
        hide: false
        interval: 10s
        intervalFactor: 1
        legendFormat: '{{ id }}'
        metric: container_cpu
        refId: A
        step: 10
    thresholds: []
    timeRegions: []
    title: All processes CPU usage (1m avg)
    tooltip:
      msResolution: true
      shared: true
      sort: 2
      value_type: cumulative
    type: timeseries
    xaxis:
      mode: time
      show: true
      values: []
    yaxes:
      - format: none
        label: cores
        logBase: 1
        show: true
      - format: short
        logBase: 1
        show: false
    yaxis:
      align: false
  - collapsed: false
    datasource:
      type: prometheus
      uid: ${main_datasource}
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 49
    id: 39
    panels: []
    targets:
      - datasource:
          type: prometheus
          uid: ${main_datasource}
        refId: A
    title: Pods memory usage
    type: row
  - aliasColors: {}
    bars: false
    dashLength: 10
    dashes: false
    datasource:
      type: prometheus
      uid: ${k8s_datasource}
    decimals: 2
    editable: true
    error: false
    fill: 0
    fillGradient: 0
    grid: {}
    gridPos:
      h: 7
      w: 24
      x: 0
      y: 50
    hiddenSeries: false
    id: 25
    isNew: true
    legend:
      alignAsTable: true
      avg: true
      current: true
      max: false
      min: false
      rightSide: true
      show: true
      sideWidth: 200
      sort: current
      sortDesc: true
      total: false
      values: true
    lines: true
    linewidth: 2
    links: []
    nullPointMode: connected
    options:
      alertThreshold: true
    percentage: false
    pluginVersion: 9.2.5
    pointradius: 5
    points: false
    renderer: flot
    seriesOverrides: []
    spaceLength: 10
    stack: false
    steppedLine: true
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (container_memory_working_set_bytes{image!="",kubernetes_io_hostname=~"^$Node$"})
          by (pod)
        interval: 10s
        intervalFactor: 1
        legendFormat: '{{ pod_name }}'
        metric: container_memory_usage:sort_desc
        refId: A
        step: 10
    thresholds: []
    timeRegions: []
    title: Pods memory usage
    tooltip:
      msResolution: false
      shared: true
      sort: 2
      value_type: cumulative
    type: timeseries
    xaxis:
      mode: time
      show: true
      values: []
    yaxes:
      - format: bytes
        logBase: 1
        show: true
      - format: short
        logBase: 1
        show: false
    yaxis:
      align: false
  - collapsed: false
    datasource:
      type: prometheus
      uid: ${main_datasource}
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 57
    id: 40
    panels: []
    targets:
      - datasource:
          type: prometheus
          uid: ${main_datasource}
        refId: A
    title: System services memory usage
    type: row
  - aliasColors: {}
    bars: false
    dashLength: 10
    dashes: false
    datasource:
      type: prometheus
      uid: ${k8s_datasource}
    decimals: 2
    editable: true
    error: false
    fill: 0
    fillGradient: 0
    grid: {}
    gridPos:
      h: 7
      w: 24
      x: 0
      y: 58
    hiddenSeries: false
    id: 26
    isNew: true
    legend:
      alignAsTable: true
      avg: true
      current: true
      max: false
      min: false
      rightSide: true
      show: true
      sideWidth: 200
      sort: current
      sortDesc: true
      total: false
      values: true
    lines: true
    linewidth: 2
    links: []
    nullPointMode: connected
    options:
      alertThreshold: true
    percentage: false
    pluginVersion: 9.2.5
    pointradius: 5
    points: false
    renderer: flot
    seriesOverrides: []
    spaceLength: 10
    stack: false
    steppedLine: true
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (container_memory_working_set_bytes{id=~"/system.*",kubernetes_io_hostname=~"^$Node$"})
          by (id)
        interval: 10s
        intervalFactor: 1
        legendFormat: '{{ systemd_service_name }}'
        metric: container_memory_usage:sort_desc
        refId: A
        step: 10
    thresholds: []
    timeRegions: []
    title: System services memory usage
    tooltip:
      msResolution: false
      shared: true
      sort: 2
      value_type: cumulative
    type: timeseries
    xaxis:
      mode: time
      show: true
      values: []
    yaxes:
      - format: bytes
        logBase: 1
        show: true
      - format: short
        logBase: 1
        show: false
    yaxis:
      align: false
  - collapsed: false
    datasource:
      type: prometheus
      uid: ${main_datasource}
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 65
    id: 41
    panels: []
    targets:
      - datasource:
          type: prometheus
          uid: ${main_datasource}
        refId: A
    title: Containers memory usage
    type: row
  - aliasColors: {}
    bars: false
    dashLength: 10
    dashes: false
    datasource:
      type: prometheus
      uid: ${k8s_datasource}
    decimals: 2
    editable: true
    error: false
    fill: 0
    fillGradient: 0
    grid: {}
    gridPos:
      h: 7
      w: 24
      x: 0
      y: 66
    hiddenSeries: false
    id: 27
    isNew: true
    legend:
      alignAsTable: true
      avg: true
      current: true
      max: true
      min: false
      rightSide: true
      show: true
      sort: max
      sortDesc: true
      total: false
      values: true
    lines: true
    linewidth: 2
    links: []
    nullPointMode: connected
    options:
      alertThreshold: true
    percentage: false
    pluginVersion: 9.0.7
    pointradius: 5
    points: false
    renderer: flot
    seriesOverrides: []
    spaceLength: 10
    stack: false
    steppedLine: true
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        exemplar: true
        expr: sum (container_memory_working_set_bytes{image!="",name=~"^k8s_.*",container_name!="POD",kubernetes_io_hostname=~"^$Node$"})
          by (container_name, pod_name)
        hide: true
        interval: 10s
        intervalFactor: 1
        legendFormat: 'pod: {{ pod_name }} | {{ container_name }}'
        metric: container_memory_usage:sort_desc
        refId: A
        step: 10
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        exemplar: true
        expr: sum (container_memory_working_set_bytes{image!="",name!~"^k8s_.*",kubernetes_io_hostname=~"^$Node$"})
          by (image)
        interval: 10s
        intervalFactor: 1
        legendFormat: '{{ image }}'
        metric: container_memory_usage:sort_desc
        refId: B
        step: 10
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (container_memory_working_set_bytes{rkt_container_name!="",kubernetes_io_hostname=~"^$Node$"})
          by (kubernetes_io_hostname, rkt_container_name)
        hide: true
        interval: 10s
        intervalFactor: 1
        legendFormat: 'rkt: {{ kubernetes_io_hostname }} | {{ rkt_container_name }}'
        metric: container_memory_usage:sort_desc
        refId: C
        step: 10
    thresholds: []
    timeRegions: []
    title: Containers memory usage
    tooltip:
      msResolution: false
      shared: true
      sort: 2
      value_type: cumulative
    type: timeseries
    xaxis:
      mode: time
      show: true
      values: []
    yaxes:
      - format: bytes
        logBase: 1
        show: true
      - format: short
        logBase: 1
        show: false
    yaxis:
      align: false
  - collapsed: false
    datasource:
      type: prometheus
      uid: ${main_datasource}
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 73
    id: 42
    panels: []
    targets:
      - datasource:
          type: prometheus
          uid: ${main_datasource}
        refId: A
    title: All processes memory usage
    type: row
  - aliasColors: {}
    bars: false
    dashLength: 10
    dashes: false
    datasource:
      type: prometheus
      uid: ${k8s_datasource}
    decimals: 2
    editable: true
    error: false
    fill: 0
    fillGradient: 0
    grid: {}
    gridPos:
      h: 14
      w: 24
      x: 0
      y: 74
    hiddenSeries: false
    id: 28
    isNew: true
    legend:
      alignAsTable: true
      avg: true
      current: true
      max: false
      min: false
      rightSide: false
      show: true
      sideWidth: 200
      sort: current
      sortDesc: true
      total: false
      values: true
    lines: true
    linewidth: 2
    links: []
    nullPointMode: connected
    options:
      alertThreshold: true
    percentage: false
    pluginVersion: 9.0.7
    pointradius: 5
    points: false
    renderer: flot
    seriesOverrides: []
    spaceLength: 10
    stack: false
    steppedLine: true
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (container_memory_working_set_bytes{id!="/",kubernetes_io_hostname=~"^$Node$"})
          by (id)
        interval: 10s
        intervalFactor: 1
        legendFormat: '{{ id }}'
        metric: container_memory_usage:sort_desc
        refId: A
        step: 10
    thresholds: []
    timeRegions: []
    title: All processes memory usage
    tooltip:
      msResolution: false
      shared: true
      sort: 2
      value_type: cumulative
    type: timeseries
    xaxis:
      mode: time
      show: true
      values: []
    yaxes:
      - format: bytes
        logBase: 1
        show: true
      - format: short
        logBase: 1
        show: false
    yaxis:
      align: false
  - collapsed: false
    datasource:
      type: prometheus
      uid: ${main_datasource}
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 88
    id: 43
    panels: []
    targets:
      - datasource:
          type: prometheus
          uid: ${main_datasource}
        refId: A
    title: Pods network I/O
    type: row
  - aliasColors: {}
    bars: false
    dashLength: 10
    dashes: false
    datasource:
      type: prometheus
      uid: ${k8s_datasource}
    decimals: 2
    editable: true
    error: false
    fill: 1
    fillGradient: 0
    grid: {}
    gridPos:
      h: 7
      w: 24
      x: 0
      y: 89
    hiddenSeries: false
    id: 16
    isNew: true
    legend:
      alignAsTable: true
      avg: true
      current: true
      max: false
      min: false
      rightSide: true
      show: true
      sideWidth: 200
      sort: current
      sortDesc: true
      total: false
      values: true
    lines: true
    linewidth: 2
    links: []
    nullPointMode: connected
    options:
      alertThreshold: true
    percentage: false
    pluginVersion: 9.0.7
    pointradius: 5
    points: false
    renderer: flot
    seriesOverrides: []
    spaceLength: 10
    stack: false
    steppedLine: false
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        editorMode: code
        expr: sum (rate (container_network_receive_bytes_total{image!="",kubernetes_io_hostname=~"^$Node$"}[1m]))
          by (pod)
        interval: 10s
        intervalFactor: 1
        legendFormat: -> {{ pod }}
        metric: network
        range: true
        refId: A
        step: 10
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        editorMode: code
        expr: '- sum (rate (container_network_transmit_bytes_total{image!="",name=~"^k8s_.*",kubernetes_io_hostname=~"^$Node$"}[1m]))
          by (pod_name)'
        interval: 10s
        intervalFactor: 1
        legendFormat: <- {{ pod }}
        metric: network
        range: true
        refId: B
        step: 10
    thresholds: []
    timeRegions: []
    title: Pods network I/O (1m avg)
    tooltip:
      msResolution: false
      shared: true
      sort: 2
      value_type: cumulative
    type: timeseries
    xaxis:
      mode: time
      show: true
      values: []
    yaxes:
      - format: Bps
        logBase: 1
        show: true
      - format: short
        logBase: 1
        show: false
    yaxis:
      align: false
  - collapsed: false
    datasource:
      type: prometheus
      uid: ${main_datasource}
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 96
    id: 44
    panels: []
    targets:
      - datasource:
          type: prometheus
          uid: ${main_datasource}
        refId: A
    title: Containers network I/O
    type: row
  - aliasColors: {}
    bars: false
    dashLength: 10
    dashes: false
    datasource:
      type: prometheus
      uid: ${k8s_datasource}
    decimals: 2
    editable: true
    error: false
    fill: 1
    fillGradient: 0
    grid: {}
    gridPos:
      h: 7
      w: 24
      x: 0
      y: 97
    hiddenSeries: false
    id: 30
    isNew: true
    legend:
      alignAsTable: true
      avg: true
      current: true
      max: false
      min: false
      rightSide: true
      show: true
      sideWidth: 200
      sort: current
      sortDesc: true
      total: false
      values: true
    lines: true
    linewidth: 2
    links: []
    nullPointMode: connected
    options:
      alertThreshold: true
    percentage: false
    pluginVersion: 9.0.7
    pointradius: 5
    points: false
    renderer: flot
    seriesOverrides: []
    spaceLength: 10
    stack: false
    steppedLine: false
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        editorMode: code
        expr: sum (rate (container_network_receive_bytes_total{image!="",name=~"^k8s_.*",kubernetes_io_hostname=~"^$Node$"}[1m]))
          by (container_name, pod)
        hide: false
        interval: 10s
        intervalFactor: 1
        legendFormat: '-> pod: {{ pod }} | {{ container_name }}'
        metric: network
        range: true
        refId: B
        step: 10
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        editorMode: code
        expr: '- sum (rate (container_network_transmit_bytes_total{image!="",name=~"^k8s_.*",kubernetes_io_hostname=~"^$Node$"}[1m]))
          by (container_name, pod)'
        hide: false
        interval: 10s
        intervalFactor: 1
        legendFormat: '<- pod: {{ pod }} | {{ container_name }}'
        metric: network
        range: true
        refId: D
        step: 10
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (rate (container_network_receive_bytes_total{image!="",name!~"^k8s_.*",kubernetes_io_hostname=~"^$Node$"}[1m]))
          by (kubernetes_io_hostname, name, image)
        hide: false
        interval: 10s
        intervalFactor: 1
        legendFormat: '-> docker: {{ kubernetes_io_hostname }} | {{ image }} ({{ name
          }})'
        metric: network
        refId: A
        step: 10
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: '- sum (rate (container_network_transmit_bytes_total{image!="",name!~"^k8s_.*",kubernetes_io_hostname=~"^$Node$"}[1m]))
          by (kubernetes_io_hostname, name, image)'
        hide: false
        interval: 10s
        intervalFactor: 1
        legendFormat: '<- docker: {{ kubernetes_io_hostname }} | {{ image }} ({{ name
          }})'
        metric: network
        refId: C
        step: 10
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (rate (container_network_transmit_bytes_total{rkt_container_name!="",kubernetes_io_hostname=~"^$Node$"}[1m]))
          by (kubernetes_io_hostname, rkt_container_name)
        hide: false
        interval: 10s
        intervalFactor: 1
        legendFormat: '-> rkt: {{ kubernetes_io_hostname }} | {{ rkt_container_name
          }}'
        metric: network
        refId: E
        step: 10
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: '- sum (rate (container_network_transmit_bytes_total{rkt_container_name!="",kubernetes_io_hostname=~"^$Node$"}[1m]))
          by (kubernetes_io_hostname, rkt_container_name)'
        hide: false
        interval: 10s
        intervalFactor: 1
        legendFormat: '<- rkt: {{ kubernetes_io_hostname }} | {{ rkt_container_name
          }}'
        metric: network
        refId: F
        step: 10
    thresholds: []
    timeRegions: []
    title: Containers network I/O (1m avg)
    tooltip:
      msResolution: false
      shared: true
      sort: 2
      value_type: cumulative
    type: timeseries
    xaxis:
      mode: time
      show: true
      values: []
    yaxes:
      - format: Bps
        logBase: 1
        show: true
      - format: short
        logBase: 1
        show: false
    yaxis:
      align: false
  - collapsed: false
    datasource:
      type: prometheus
      uid: ${main_datasource}
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 104
    id: 45
    panels: []
    targets:
      - datasource:
          type: prometheus
          uid: ${main_datasource}
        refId: A
    title: All processes network I/O
    type: row
  - aliasColors: {}
    bars: false
    dashLength: 10
    dashes: false
    datasource:
      type: prometheus
      uid: ${k8s_datasource}
    decimals: 2
    editable: true
    error: false
    fill: 1
    fillGradient: 0
    grid: {}
    gridPos:
      h: 14
      w: 24
      x: 0
      y: 105
    hiddenSeries: false
    id: 29
    isNew: true
    legend:
      alignAsTable: true
      avg: true
      current: true
      max: false
      min: false
      rightSide: false
      show: true
      sideWidth: 200
      sort: current
      sortDesc: true
      total: false
      values: true
    lines: true
    linewidth: 2
    links: []
    nullPointMode: connected
    options:
      alertThreshold: true
    percentage: false
    pluginVersion: 9.0.7
    pointradius: 5
    points: false
    renderer: flot
    seriesOverrides: []
    spaceLength: 10
    stack: false
    steppedLine: false
    targets:
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: sum (rate (container_network_receive_bytes_total{id!="/",kubernetes_io_hostname=~"^$Node$"}[1m]))
          by (id)
        interval: 10s
        intervalFactor: 1
        legendFormat: -> {{ id }}
        metric: network
        refId: A
        step: 10
      - datasource:
          type: prometheus
          uid: ${k8s_datasource}
        expr: '- sum (rate (container_network_transmit_bytes_total{id!="/",kubernetes_io_hostname=~"^$Node$"}[1m]))
          by (id)'
        interval: 10s
        intervalFactor: 1
        legendFormat: <- {{ id }}
        metric: network
        refId: B
        step: 10
    thresholds: []
    timeRegions: []
    title: All processes network I/O (1m avg)
    tooltip:
      msResolution: false
      shared: true
      sort: 2
      value_type: cumulative
    type: timeseries
    xaxis:
      mode: time
      show: true
      values: []
    yaxes:
      - format: Bps
        logBase: 1
        show: true
      - format: short
        logBase: 1
        show: false
    yaxis:
      align: false
refresh: 10s
style: dark
tags:
  - kubernetes
templating:
  list:
    - allValue: .*
      current:
        selected: false
        text: All
        value: $__all
      datasource:
        type: prometheus
        uid: ${k8s_datasource}
      definition: ''
      hide: 0
      includeAll: true
      multi: false
      name: Node
      options: []
      query:
        query: label_values(kubernetes_io_hostname)
        refId: K8s-Prom-Node-Variable-Query
      refresh: 1
      regex: ''
      skipUrlSync: false
      sort: 0
      type: query
time:
  from: now-1h
  to: now
timepicker:
  refresh_intervals:
    - 5s
    - 10s
    - 30s
    - 1m
    - 5m
    - 15m
    - 30m
    - 1h
    - 2h
    - 1d
  time_options:
    - 5m
    - 15m
    - 1h
    - 6h
    - 12h
    - 24h
    - 2d
    - 7d
    - 30d
timezone: browser
title: Kubernetes cluster monitoring (via Prometheus)
weekStart: ''
